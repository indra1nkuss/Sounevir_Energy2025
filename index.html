<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <!-- Perbaikan viewport (hindari zoom-out dan dukungan mobile) -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Selamat Para Juara Energi 2025 âš¡</title>
  <style>
    /* ======== GLOBAL ======== */
    :root {
      --glass-bg: rgba(255,255,255,0.08);
      --accent: #00eaff;
      --accent-2: #ffcb42;
    }

    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100%;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overscroll-behavior: none;
      background: radial-gradient(circle at top, #001829 0%, #000 85%);
      color: white;
      font-family: "Poppins", sans-serif;
      box-sizing: border-box;
    }

    /* Gunakan dynamic viewport unit agar iOS tidak memotong */
    body.home {
      height: 100dvh; /* 100% dari visual viewport modern */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: env(safe-area-inset-top, 12px) env(safe-area-inset-right, 12px) env(safe-area-inset-bottom, 12px) env(safe-area-inset-left, 12px);
      position: relative;
      overflow: hidden;
    }

    /* ======== PARTICLE CANVAS ======== */
    canvas#energyCanvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100dvh;
      z-index: 0;
      display: block;
    }

    /* ======== GLOW LINES ======== */
    .light-line {
      position: absolute;
      top: 0;
      left: -120%;
      width: 240%;
      height: 120%;
      background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.12), transparent);
      animation: shine 6s linear infinite;
      z-index: 1;
      pointer-events: none;
      mix-blend-mode: screen;
    }
    @keyframes shine {
      from { transform: translateX(-50%); }
      to { transform: translateX(50%); }
    }

    /* ======== CONTAINER ======== */
    .container {
      position: relative;
      z-index: 3;
      text-align: center;
      padding: 28px 22px;
      border-radius: 20px;
      background: var(--glass-bg);
      backdrop-filter: blur(10px) saturate(120%);
      border: 1px solid rgba(0, 255, 255, 0.18);
      box-shadow: 0 8px 30px rgba(0, 255, 255, 0.12), 0 2px 8px rgba(0,0,0,0.6);
      animation: fadeIn 1s ease-out;
      max-width: 720px;
      width: min(92%, 720px);
      margin: 0 auto;
      transform-origin: center;
      overflow: visible;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(18px) scale(0.995); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    /* ======== LOGO ======== */
    .logo {
      display: block;
      margin: 6px auto 10px auto;
      width: 84%;
      max-width: 320px;
      height: auto;
      object-fit: contain;
      animation: floatLogo 3s ease-in-out infinite;
      filter: drop-shadow(0 0 18px rgba(0,230,255,0.18));
    }

    @keyframes floatLogo {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }

    /* ======== TITLE ======== */
    h1 {
      font-size: 1.6rem;
      margin: 8px 0 10px 0;
      line-height: 1.1;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: glowText 2s ease-in-out infinite alternate;
      letter-spacing: -0.5px;
    }
    @keyframes glowText {
      from { text-shadow: 0 0 10px rgba(0,234,255,0.7); }
      to { text-shadow: 0 0 22px rgba(255,204,66,0.65); }
    }

    /* ======== PARAGRAPH ======== */
    p {
      color: #d6ecff;
      margin: 10px auto 18px auto;
      line-height: 1.55;
      font-size: 1rem;
      max-width: 92%;
      opacity: 1;
    }

    /* ======== BUTTON ======== */
    .cta {
      background: linear-gradient(90deg, var(--accent), #ffaa00);
      border: none;
      color: #000;
      font-weight: 700;
      padding: 12px 36px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1.05rem;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35), 0 0 20px rgba(255,255,255,0.06) inset;
      transition: transform .22s ease, box-shadow .22s ease;
    }
    .cta:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 10px 30px rgba(0,0,0,0.45); }

    /* ======== AUDIO BUTTON ======== */
    #audioToggle {
      position: fixed;
      bottom: calc(18px + env(safe-area-inset-bottom));
      right: calc(18px + env(safe-area-inset-right));
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(0,255,255,0.28);
      color: white;
      font-size: 22px;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 6px 18px rgba(0,255,255,0.12);
      cursor: pointer;
      z-index: 6;
      transition: transform .18s ease, background .18s ease;
    }
    #audioToggle:active { transform: scale(0.98); }
    #audioToggle:hover { background: rgba(255,255,255,0.24); }

    /* ======== FLOATING EMOJI (di dalam container) ======== */
    .emoji {
      position: absolute;
      pointer-events: none;
      opacity: 0.9;
      user-select: none;
      transform-origin: center;
      z-index: 4;
      will-change: transform, top, left, opacity;
    }

    /* ======== RESPONSIVE SMALL SCREENS ======== */
    @media (max-width: 480px) {
      h1 { font-size: 1.28rem; }
      p { font-size: 0.95rem; }
      .logo { max-width: 260px; }
      .cta { padding: 10px 24px; font-size: 0.98rem; }
    }

    /* floating animation used in JS */
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.95; }
      100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
    }
  </style>
</head>

<body class="home">
  <canvas id="energyCanvas" aria-hidden="true"></canvas>
  <div class="light-line" aria-hidden="true"></div>

  <div class="container" role="main" aria-label="Selamat Para Juara Energi 2025">
    <img src="assets/energiteam.png" class="logo" alt="Logo Energi">

    <h1>âš¡ Selamat Kepada Para Juara<br />Training Efisiensi Energi 2025 âš¡</h1>

    <p>
      Terima kasih atas dedikasi dan antusiasme luar biasa selama mengikuti pelatihan efisiensi energi tahun 2025.
      <br />Prestasi ini menjadi simbol semangat perubahan menuju masa depan yang lebih hemat, cerah, dan berkelanjutan! ðŸ”‹âœ¨
    </p>

    <button class="cta" onclick="goToWinners()">ðŸ”¥ Lihat Daftar Pemenang</button>
  </div>

  <audio id="bgMusic" src="assets/champions.mp3" loop></audio>
  <button id="audioToggle" aria-pressed="false">ðŸ”Š</button>

  <script>
  
    // ===== Canvas particle (high-DPR safe) =====
    const canvas = document.getElementById('energyCanvas');
    const ctx = canvas.getContext('2d', { alpha: true });
    function resizeCanvas() {
      const dpr = Math.max(window.devicePixelRatio || 1, 1);
      canvas.style.width = window.innerWidth + 'px';
      canvas.style.height = window.innerHeight + 'px';
      canvas.width = Math.round(window.innerWidth * dpr);
      canvas.height = Math.round(window.innerHeight * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // particles
    const particles = Array.from({ length: 70 }, () => ({
      x: Math.random() * innerWidth,
      y: Math.random() * innerHeight,
      s: Math.random() * 3 + 1,
      v: Math.random() * 1 + 0.4,
      c: `hsl(${160 + Math.random() * 80}, 90%, ${50 + Math.random()*10}%)`
    }));

    function draw() {
      ctx.clearRect(0,0,innerWidth,innerHeight);
      for (const p of particles) {
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
        ctx.fillStyle = p.c;
        ctx.globalAlpha = 0.95;
        ctx.fill();
        p.y -= p.v;
        if (p.y < -10) p.y = innerHeight + 10;
      }
      requestAnimationFrame(draw);
    }
    draw();

    // ===== Floating emojis inside container (no overflow) =====
    const emojis = ['âš¡','ðŸ”‹','âœ¨','ðŸ”¥','ðŸŒŸ'];
    const container = document.querySelector('.container');

    // create emoji elements positioned relative inside container
    const emojiElements = [];
    const containerRect = () => container.getBoundingClientRect();
    function createEmojis(n = 12) {
      const rect = containerRect();
      for (let i=0;i<n;i++){
        const span = document.createElement('span');
        span.className = 'emoji';
        span.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        // random position within container area (slightly above)
        const left = Math.random() * (rect.width - 24);
        const top = Math.random() * 28 + rect.height - 28; // start near bottom of container
        span.style.left = left + 'px';
        span.style.top = top + 'px';
        span.style.fontSize = (Math.random() * 22 + 18) + 'px';
        span.style.animation = `floatUp ${6 + Math.random()*6}s linear infinite`;
        container.appendChild(span);
        emojiElements.push(span);
      }
    }
    // remove existing first (safe if re-run)
    emojiElements.forEach(e => e.remove());
    createEmojis(16);

    // ===== Fix for Safari/mobile address bar reflow: recent resize adjustments =====
    // Reposition emojis when viewport size changes
    window.addEventListener('resize', () => {
      const rect = containerRect();
      emojiElements.forEach((el, i) => {
        const left = Math.random() * Math.max(1, rect.width - 24);
        const top = Math.random() * 28 + rect.height - 28;
        el.style.left = left + 'px';
        el.style.top = top + 'px';
      });
    });

    // ===== Navigation =====
    function goToWinners() {
      window.location.href = 'winners.html';
    }
    // expose to global scope for button inline onclick
    window.goToWinners = goToWinners;
  </script>
</body>
</html>
